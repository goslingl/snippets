概率-统计学习笔记

* 安装包

```
pip install statsmodels
```

# 统计

## 统计相关的概念

#####     效应量cohen'd

> Cohen's d (标准化平均偏差),衡量两个均值的效应量(effect size)
>
> [wiki](https://en.wikipedia.org/wiki/Effect_size#Cohen's_d)
>
> [What Is And How To Calculate Cohen’s d?](https://toptipbio.com/cohens-d/)

#####     样本方差

> Q: 为什么样本方差的分母是n-1？为什么它又叫做无偏估计？
>
> A: 因为因为均值已经用了n个数的平均来做估计。
>
> 在求方差时，只有(n-1)个数和均值信息是不相关的。
>
> 而第ｎ个数已经可以由前(n-1)个数和均值来唯一确定，实际上没有信息量。所以在计算方差时，只除以(n-1)。

> 使用样本均值计算替代分布均值来计算方差必然会导致方差被低估：
>
> 在不知道随机变量真实数学期望的前提下，如何“正确”的估计方差呢？答案是把上式中的分母`n`换成`n-1`，通过这种方法把原来的偏小的估计“放大”一点点



  ![\begin{eqnarray}\frac{1}{n}\sum_{i=1}^n(X_i-\bar{X})^2 &=&\frac{1}{n}\sum_{i=1}^n\Big[(X_i-\mu) + (\mu -\bar{X}) \Big]^2\\&=&\frac{1}{n}\sum_{i=1}^n(X_i-\mu)^2 +\frac{2}{n}\sum_{i=1}^n(X_i-\mu)(\mu -\bar{X})+\frac{1}{n}\sum_{i=1}^n(\mu -\bar{X})^2 \\&=&\frac{1}{n}\sum_{i=1}^n(X_i-\mu)^2 +2(\bar{X}-\mu)(\mu -\bar{X})+(\mu -\bar{X})^2 \\&=&\frac{1}{n}\sum_{i=1}^n(X_i-\mu)^2 -(\mu -\bar{X})^2 \end{eqnarray}](/Users/fisher/Learning/笔记/imgs/equation.svg)

  

  换言之，除非正好![\bar{X}=\mu](https://www.zhihu.com/equation?tex=%5Cbar%7BX%7D%3D%5Cmu)，否则我们一定有
  ![\frac{1}{n}\sum_{i=1}^n(X_i-\bar{X})^2 <\frac{1}{n}\sum_{i=1}^n(X_i-\mu)^2](https://www.zhihu.com/equation?tex=%5Cfrac%7B1%7D%7Bn%7D%5Csum_%7Bi%3D1%7D%5En%28X_i-%5Cbar%7BX%7D%29%5E2+%3C%5Cfrac%7B1%7D%7Bn%7D%5Csum_%7Bi%3D1%7D%5En%28X_i-%5Cmu%29%5E2+)

##### 概率质量函数(PMF)

##### 概率密度函数(PDF)

> 值不是概率，是概率的"密度"

##### 累积分布函数(CDF)

##### 中心极限定理

##### **贝塔函数B(P,Q)**

> https://baike.baidu.com/item/%E8%B4%9D%E5%A1%94%E5%87%BD%E6%95%B0/4643050



##### **伽马函数Γ(x)**

> https://baike.baidu.com/item/%E4%BC%BD%E7%8E%9B%E5%87%BD%E6%95%B0/3540177



##### **双伽马函数ψ(x)**

> https://zh.wikipedia.org/wiki/%E5%8F%8C%E4%BC%BD%E7%8E%9B%E5%87%BD%E6%95%B0



# 概率

### 基础概念

试验

样本点  试验结果

样本空间

事件 样本点的某个集合

古典概率模型：排列（考虑顺序）  组合（不考虑顺序）   全排列公式（有放回）   二项式展开系数

### 随机事件

### 随机变量

> 表示随机试验各种结果的实值单值函数。随机事件不论与数量是否直接有关，都可以数量化，即都能用数量化的方式表达。
>
> （另一种表述）是一个**样本空间**向**实数域**的**映射**，而且这个映射是**单射**。样本空间可能由**数字**表示，（比如骰子123456），也可能由**文字**描述（比如正面向上），而随机变量要做的就是把这些样本空间全都变成数字的形式。

* 分类

  离散型和连续型（在一定区间内取值个数是否为有限个）

* 性质

  * 期望
  * 方差

  

### 随机过程

> **随机过程**（英语：Stochastic process）是[随机变量](https://zh.wikipedia.org/wiki/隨機變數)的[集合](https://zh.wikipedia.org/wiki/集合_(数学))。若一[随机系统](https://zh.wikipedia.org/w/index.php?title=随机系统&action=edit&redlink=1)的[样本点](https://zh.wikipedia.org/wiki/样本点)是随机函数，则称此函数为样本函数，这一随机系统全部样本函数的集合是一个**随机过程**。实际应用中，样本函数的一般定义在[时间域](https://zh.wikipedia.org/wiki/时间域)或者[空间域](https://zh.wikipedia.org/w/index.php?title=空间域&action=edit&redlink=1)。随机过程的实例如[股票](https://zh.wikipedia.org/wiki/股票)和[汇率](https://zh.wikipedia.org/wiki/汇率)的波动、[语音信号](https://zh.wikipedia.org/w/index.php?title=语音信号&action=edit&redlink=1)、[视频信号](https://zh.wikipedia.org/w/index.php?title=视频信号&action=edit&redlink=1)、[体温](https://zh.wikipedia.org/wiki/體溫)的变化，随机运动如[布朗运动](https://zh.wikipedia.org/wiki/布朗运动)、[随机徘徊](https://zh.wikipedia.org/wiki/随机徘徊)等等
>
> 

#### 伯努利过程

> **伯努利过程**是一个由有限个或无限个的[独立](https://zh.wikipedia.org/wiki/独立)[随机变量](https://zh.wikipedia.org/wiki/随机变量) *X*1, *X*2, *X*3 ,..., 所组成的[离散时间](https://zh.wikipedia.org/w/index.php?title=离散时间&action=edit&redlink=1)[随机过程](https://zh.wikipedia.org/wiki/随机过程)，其中 *X*1, *X*2, *X*3 ,..., 满足如下条件：
>
> - 对每个 *i*, *X**i* 等于 0 或 1;
> - 对每个 *i*, *X**i* = 1 的概率等于 *p*.
>
> 换言之，伯努利过程是一列独立同分布的[伯努利试验](https://zh.wikipedia.org/wiki/伯努利試驗)。每个*X**i* 的2个结果也被称为“成功”或“失败”。所以当用数字 0 或 1 来表示的时候，这个数字被称为第i个试验的成功次数。

与伯努利过程相关的随机变量有：

- 前 n 个试验的成功次数服从[二项分布](https://zh.wikipedia.org/wiki/二项分布)。
- 要得到 r 次成功所需要的试验次数服从[负二项分布](https://zh.wikipedia.org/wiki/负二项分布)。
- 要得到 1 次成功所需要的试验次数服从[几何分布](https://zh.wikipedia.org/wiki/幾何分佈)，这是负二项分布的一个特例。

#### 泊松过程

### 随机变量的数字特征

数学期望

方差

协方差

相关系数

矩

## 随机变量的分布

### 离散分布

##### 0-1分布

> 0-1分布又叫 两点分布,伯努利分布
>
> n=1情况下的[二项分布](https://baike.baidu.com/item/二项分布/1442377)。即只先进行一次事件试验，该事件发生的概率为p，不发生的概率为1-p。这是一个最简单的分布，任何一个只有两种结果的[随机现象](https://baike.baidu.com/item/随机现象/917144)都服从0-1分布

X~B(x,p)

[数学期望](https://baike.baidu.com/item/数学期望/5362790)：E(X)=p

方差：D(X)=p(1-p)



##### 二项分布

记为

![img](https://bkimg.cdn.bcebos.com/formula/bcffdbb8feb6becc504ad8dfffbce9a4.svg)

或

![img](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/cc0fb2cf4503f27b5f06d2d3e83156e6.svg)

n次试验中正好得到k次成功的概率由**概率质量函数**给出：

$P\{X=k\}=C(n,k)p^k(1-p)^{n-k}$

其中，$C(n,k)$为二项式系数：$C(n,k)=\frac{n!}{(n-k)!k!}$

**累计分布函数**

$F(x;n,p)=Pr(X\leqslant x)=\sum_{i=0}^{x}C(n,i)p^i(1-p)^{n-i}$

**数学期望**：

E(X)=np

**方差**：

D(X)=np(1-p)

##### 泊松分布

> 适合于描述单位时间内随机事件发生的次数。**参数λ**是单位时间(或单位面积)内随机事件的平均发生次数。
>
> 当二项分布的n很大而p很小时，泊松分布可作为二项分布的近似，其中λ为np。通常当n≧20,p≦0.05时，就可以用[泊松公式](https://baike.baidu.com/item/泊松公式)近似得计算

**期望**：λ

利用 ![[公式]](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/fracxkk.svg)可快速求出泊松分布的期望

![[公式]](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/end{aligned}.png)

**方差**：λ

由

![[公式]](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/fangcha.svg)

可知其方差为

![[公式]](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/fangcha2.png)

**概率函数**：

$P(X=k)=\frac{λ^k}{k!}e^{-λ}$

**累积分布函数**：

![[公式]](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/right.png)

**特征函数**：

![img](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/444dba043e9e49d1978c0a37951de174.svg)

##### 几何分布

> ![image-20211027184042557](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/image-20211027184042557.png)
>
> **适用场景：**在一组伯努利实验中，若每次成功的概率为 `p` ，求当进行到第 `k` 次试验时才第一次成功的概率
>
> 几何分布是**离散型分布**中**唯一**具有无记忆性的分布:
>
> ​    在一串伯努利试验中若前 `m` 次试验均不成功，则后续试验每一次成功的概率与重新从第一次开始计数试验成功的概率相同，即前 `m` 次试验并不对接下来的结果造成任何影响

**累计分布函数**

![image-20211027184458763](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/image-20211027184458763.png)

**期望**

![image-20211027184701409](/Users/fisher/Library/Application Support/typora-user-images/image-20211027184701409.png)

**方差**

![image-20211027184802238](/Users/fisher/Library/Application Support/typora-user-images/image-20211027184802238.png)

![image-20211027184825237](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/image-20211027184825237.png)



##### 超几何分布

* 定义

  ![image-20211028100455570](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/image-20211028100455570.png)

  

##### 负二项分布(**帕斯卡分布**)

* 定义

  ![image-20211028101041039](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/image-20211028101041039.png)

  > 从直观上来看，几何分布描述的是一组伯努利实验中**第一次**成功的实验次数，而负二项分布描述的是一组伯努利实验中**第 r次**成功的实验次数，自然的，几何分布可以被负二项分布所包含。

  > 当**r**是整数时，负二项分布又称**帕斯卡分布**

  ![image-20211028181723094](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/image-20211028181723094.png)

  * 应用

    **巴拿赫火柴盒问题**

    > 某数学家有两盒火柴,每盒都有n根火柴,每次用火柴时他随机地在两盒中任取一盒并从中抽出一根.求该数学家用完一盒时另一盒还有r根火柴的概率
    >
    > 从一盒中取一次火柴视为一次成功试验，从另一盒中取一次火柴视为一次失败的试验,可将问题转化为**帕斯卡分布**。但是根据不同的假设,会有两个不同的答案。

    ![image-20211028102048594](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/image-20211028102048594.png)

    

    **求帕斯卡分布的期望和方差的三种方法**  **：**

    **方法一**：用求离散型随机变量数学期望的方法来求帕斯卡分布的数学期望和方差；

    **方法二：**利用幂级数的性质求期望和方差；

    **方法三：**将帕斯卡分布分解为若干几何分布之和。

### 连续分布

##### 均匀分布

> 也叫矩形分布，它是对称概率分布，在相同长度间隔的分布概率是等可能的。 均匀分布由两个参数a和b定义，它们是数轴上的最小值和最大值，通常缩写为U（a，b）。

![image-20211028112910205](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/image-20211028112910205.png)

##### 指数分布

##### 帕累托分布

> https://baike.baidu.com/item/%E5%B8%95%E7%B4%AF%E6%89%98%E5%88%86%E5%B8%83/3344172

##### 威布尔分布

> 即**韦伯分布**（Weibull distribution），又称**韦氏分布**或**韦布尔分布**,是可靠性分析和寿命检验的理论基础。
>
> 可以模拟随时间增加（或减少）的故障率，而当磨损率或故障率（例如，故障率）恒定时，指数分布是合适的。 所以韦氏分布在可靠性工程中被广泛应用，尤其适用于机电类产品的磨损累计失效的分布形式。由于它可以利用概率值很容易地推断出它的分布参数，被广泛应用于各种寿命试验的数据处理。

##### 正态分布(**高斯分布**)

​    正态概率图(normal probability plot)

> 

##### 对数正态分布

##### 卡方分布(![img](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/8831b7d7bd338d1ddce4f768286d2044.svg)分布)

* 定义

> **[卡方分布](https://zh.wikipedia.org/wiki/%E5%8D%A1%E6%96%B9%E5%88%86%E4%BD%88)**（英语：chi-square distribution[[2\]](https://zh.wikipedia.org/wiki/卡方分佈#cite_note-2), ***χ\*²**-distribution，或写作***χ\*²分布**）是[概率论](https://zh.wikipedia.org/wiki/概率论)与[统计学](https://zh.wikipedia.org/wiki/统计学)中常用的一种[概率分布](https://zh.wikipedia.org/wiki/概率分布)。k个[独立](https://zh.wikipedia.org/wiki/統計獨立)的标准[正态分布](https://zh.wikipedia.org/wiki/正态分布)变量的平方和服从[自由度](https://zh.wikipedia.org/wiki/自由度_(统计学))为k的卡方分布。卡方分布是一种特殊的[伽玛分布](https://zh.wikipedia.org/wiki/伽玛分布)，是[统计推断](https://zh.wikipedia.org/wiki/統計推論)中应用最为广泛的[概率分布](https://zh.wikipedia.org/wiki/概率分布)之一，例如[假设检验](https://zh.wikipedia.org/wiki/假說檢定)和[置信区间](https://zh.wikipedia.org/wiki/置信区间)的计算。

![image-20211028110123143](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/image-20211028110123143.png)

* 概率密度函数

  ![{\displaystyle f_{k}(x)={\frac {1}{2^{\frac {k}{2}}\Gamma ({\frac {k}{2}})}}x^{{\frac {k}{2}}-1}e^{\frac {-x}{2}}}](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/e1cf7ec6e88df8a9501490e85e76040fd2a51dda.png)

* 累积分布函数

  ![image-20211028111114334](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/image-20211028111114334.png)

  其中γ(k,z)为[不完全Γ函数](https://zh.wikipedia.org/wiki/不完全Γ函數)

##### 伽马分布

> 伽玛分布（Gamma Distribution）是[统计学](https://baike.baidu.com/item/统计学/1175)的一种连续概率[函数](https://baike.baidu.com/item/函数/301912)，是[概率统计](https://baike.baidu.com/item/概率统计/1486966)中一种非常重要的分布。“[指数分布](https://baike.baidu.com/item/指数分布/776702)”和“χ2分布”都是伽马分布的特例
>
> Gamma分布中的[参数](https://baike.baidu.com/item/参数/5934974)α称为形状参数（shape parameter），β称为逆尺度参数。
>
> 参考
>
> https://baike.baidu.com/item/%E4%BC%BD%E9%A9%AC%E5%88%86%E5%B8%83/7245468



##### 爱尔朗分布(Erlang distribution)

> 该分布与[指数分布](https://baike.baidu.com/item/指数分布)一样多用来表示独立随机事件发生的时间间隔。相比于指数分布，爱尔朗分布能更好地对现实数据进行拟合（更适用于多个串行过程，或无记忆性假设不显著的情况下）
>
> 参考
>
> https://baike.baidu.com/item/%E7%88%B1%E5%B0%94%E6%9C%97%E5%88%86%E5%B8%83/22719327

##### 耿贝尔分布(Gumbel distribution)

> 用于模拟各种分布的多个样本的最大值（或最小值）的分布
>
> 参考
>
> https://blog.csdn.net/jackytintin/article/details/79364490
>
> https://blog.csdn.net/symoriaty/article/details/96332546

### 常见分布汇总

| 分布名称   | 类型 | 描述                                                         | 表示                  | 参数           | 值域                          | 概率质量/密度函数<br />PMF/PDF                               | 累积分布函数                                                 | 期望            | 方差                 | 性质     | 参考                                                         |
| ---------- | ---- | ------------------------------------------------------------ | --------------------- | -------------- | ----------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | --------------- | -------------------- | -------- | ------------------------------------------------------------ |
| 0-1分布    | 离散 | 一次伯努利实验的结果分布                                     | X~B(x,p)              | p              | k={0,1}                       | (1-p)  , k=0<br />p       , k=1<br />                        | 0       ,k<0<br />(1-p)  ,0<k<1<br />1        ,k>=1          | p               | p(1-p)               |          |                                                              |
| 二项分布   | 离散 | n个独立的伯努利试验中成功的次数的离散概率分布                | X~B(n,p)              | n, p           | k∈{0,…,n}                     | $P\{X=k\}=C^k_np^k(1-p)^{n-k}$                               | $F(x;n,p)=Pr(X\leqslant x)=\sum_{i=0}^{x}C(n,i)p^i(1-p)^{n-i}$ | np              | np(1-p)              |          |                                                              |
| 泊松分布   | 离散 | 单位时间内随机事件发生的次数的概率分布                       | X~π(λ)<br />X~Pois(λ) | λ>0(实数)      | k∈{0, 1, 2, …}                | $\frac{λ^k}{k!}e^{-λ}$                                       |                                                              | λ               | λ                    |          |                                                              |
| 几何分布   | 离散 | 在**伯努利试验**中，得到一次成功所需要的试验次数             | X~Ge(p)               | p              | k∈{1,2,3,…}                   | $(1-p)^{k-1}p$                                               | $1-(1-p)^{k}$                                                | $\frac{1}{p}$   | $\frac{1-p}{p^2}$    | 非记忆性 |                                                              |
| 超几何分布 | 离散 | 由有限个对象中抽出n个对象，成功抽出k次指定种类的对象的概率   | X~H(n,K,N)            | N,K,n          | k∈{max(0, n+K-N),…, min(n,K)} | $f(k;n,K,N)=\frac{C^k_K C^{n-k}_{N-K}}{C^N_n}$               |                                                              |                 |                      |          |                                                              |
| 负二项分布 | 离散 | 在一系列独立同分布的伯努利试验中，成功次数到达指定次数（记为r）时失败次数的离散概率分布 | X~NB(r,p)             | r>0<br />0<p<1 |                               |                                                              |                                                              |                 |                      |          |                                                              |
| 均匀分布   | 连续 |                                                              |                       | a, b           |                               |                                                              |                                                              | $\frac{a+b}{2}$ | $\frac{(a-b)^2}{12}$ |          |                                                              |
| 指数分布   | 连续 |                                                              |                       |                |                               |                                                              |                                                              |                 |                      |          |                                                              |
| 正态分布   | 连续 |                                                              |                       |                |                               |                                                              |                                                              |                 |                      |          |                                                              |
| 卡方分布   | 连续 |                                                              |                       | k(自由度)      |                               | ![image-20211028173409068](/Users/fisher/Learning/概率_统计/统计思维-ThinkStats2/imgs/image-20211028173409068.png) | ![image-20211028173439249](/Users/fisher/Library/Application Support/typora-user-images/image-20211028173439249.png) | k               | 2k                   |          | [维基百科](https://zh.wikipedia.org/wiki/%E5%8D%A1%E6%96%B9%E5%88%86%E4%BD%88) |



### 衡量分布

#### 偏度

皮尔逊中值偏度系数



# 检测

### 假设检验

> 假设检验(hypothesis testing)，又称统计假设检验，是用来判断样本与样本、样本与总体的差异是由抽样误差引起还是本质差别造成的统计推断方法。[显著性检验](https://baike.baidu.com/item/显著性检验/8788495)是假设检验中最常用的一种方法，也是一种最基本的统计推断形式，其基本原理是先对总体的特征做出某种假设，然后通过抽样研究的统计推理，对此假设应该被拒绝还是接受做出推断。常用的假设检验方法有Z检验、t检验、卡方检验、F检验等

##### z检测

##### t检测

### 卡方检测

##### 皮尔逊卡方检验

https://zh.wikipedia.org/wiki/%E7%9A%AE%E7%88%BE%E6%A3%AE%E5%8D%A1%E6%96%B9%E6%AA%A2%E5%AE%9A



# 参考

[【1】离散型概率分布整理](https://zhuanlan.zhihu.com/p/366428308)

[【2】平凡而又神奇的贝叶斯方法](https://mp.weixin.qq.com/s/Rxyq7Ff4IVoZ3RZnMZv2Uw)
